webpackJsonp([31],{R0WQ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("lHA8"),i=n.n(a),o=n("c/Tr"),s=n.n(o),l=n("woOf"),d=n.n(l),c=n("Gu7T"),r=n.n(c),p=n("Dd8w"),u=n.n(p),h=n("NYxO"),m=n("ukFQ"),f=n("0SEp"),b=n("rJKo"),v={name:"menuSet",data:function(){return{demoRules:b.a,treeShow:!0,allId:[],open:"open",openMap:{open:"open",shut:"shut"},dialogFormVisible:!1,iconsMap:[],defaultExpand:!1,screenLoading:!1,searchAble:!1,temp:{parentId:"",icon:"",label:"",path:""},dialogStatus:"add",textMap:{Update:"Update",add:"add"},menuList:[],setMenuList:[],Archive:{}}},mounted:function(){this.menuList=this.menuSetList,this.iconsMap=m.a.state.iconsMap.map(function(t){return t.default.id.split("-")[1]})},computed:u()({},Object(h.c)(["menuSetList"])),methods:u()({},Object(h.b)(["searchMenuSet","addMenuSet","delMenuSet","putMenuSet"]),{createData:function(){var t=this;this.$refs.formData.validate(function(e){if(e){t.screenLoading=!0;var n=t.temp,a=n.parentId,i=n.label,o=n.icon,s=n.path,l={parentId:a=""===a?0:a,label:i,icon:o,path:s};t.addMenuSet(l).then(function(e){t.menuList=t.menuSetList,t.setMenuList=[{Id:0,label:t.$t("table.gradeTopMenu")}].concat(r()(t.menuSetList)),t.alertMessage(e.msg),t.resetTemp()}).catch(function(t){}).finally(function(){t.$nextTick(function(){t.screenLoading=!1})})}})},deleteData:function(t,e){var n=this;this.$confirm(this.$t("alertMsg.delMenu"),this.$t("table.prompt"),{confirmButtonText:this.$t("table.delete"),cancelButtonText:this.$t("table.cancel"),type:"warning"}).then(function(){var t={Id:e.Id};n.delMenuSet(t).then(function(t){n.menuList=n.menuSetList,n.setMenuList=[{Id:0,label:n.$t("table.gradeTopMenu")}].concat(r()(n.menuSetList)),n.alertMessage(t.msg)})}).catch(function(){})},updateData:function(){var t=this;this.$refs.formData.validate(function(e){if(e){t.screenLoading=!0;var n=t.temp,a=n.parentId,i=n.label,o=n.icon,s=n.path,l=n.Id,d=n.children,c={parentId:a=""===a?0:a,label:i,icon:o,path:s,Id:l,children:d=void 0===d?[]:d};t.putMenuSet(c).then(function(e){t.alertMessage(e.msg),t.menuList=t.menuSetList,t.setMenuList=[{Id:0,label:t.$t("table.gradeTopMenu")}].concat(r()(t.menuSetList)),t.cutover("add")}).catch(function(t){}).finally(function(){t.$nextTick(function(){t.screenLoading=!1})})}})},handleSearch:function(){var t=this;this.screenLoading=!0,this.searchMenuSet().then(function(){t.menuList=t.menuSetList,t.setMenuList=[{Id:0,label:t.$t("table.gradeTopMenu")}].concat(r()(t.menuSetList)),t.cutover("add"),t.resetTemp()}).catch(function(t){}).finally(function(){t.screenLoading=!1})},onReset:function(){"add"===this.dialogStatus?this.resetTemp():this.temp=d()({},this.Archive)},cutover:function(t){t===this.dialogStatus&&"Update"===this.dialogStatus||(this.dialogStatus="add",this.resetTemp())},resetTemp:function(){var t=this;this.$nextTick(function(){t.$refs.formData.resetFields()})},append:function(t){this.temp=d()({},t),this.Archive=d()({},t),this.dialogStatus="Update"},handleClipboard:function(t){this.temp.icon=t,this.dialogFormVisible=!1},nodeExpand:function(t){this.allId.push(t.Id),this.allId=s()(new i.a(this.allId))},nodeCollapse:function(t){var e=this.allId.indexOf(t.Id);this.allId.splice(e,1)},openList:function(){var t=this;this.defaultExpand=!this.defaultExpand,this.treeShow=!1,"open"===this.open?(this.open="shut",this.$nextTick(function(){t.allId=Object(f.a)(t.menuSetList,"Id","parentId"),t.treeShow=!0})):(this.open="open",this.$nextTick(function(){t.allId=[],t.treeShow=!0}))}})},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.screenLoading,expression:"screenLoading"}],staticClass:"dashboard-container",attrs:{"element-loading-text":t.$t("table.searchMsg")}},[n("div",{staticClass:"filter-container"},[n("el-button",{attrs:{type:"primary",disabled:!t.menuList.length},on:{click:function(e){t.openList()}}},[t._v(t._s(t.$t("table."+t.open)))]),t._v(" "),n("el-button",{attrs:{type:"primary",loading:t.searchAble},on:{click:t.handleSearch}},[t._v(t._s(t.$t("table.refresh")))])],1),t._v(" "),n("div",{attrs:{id:"g-account"}},[n("div",{staticClass:"content"},[n("el-row",{attrs:{gutter:20,type:"flex",justify:"space-between"}},[n("el-col",{staticClass:"menu-left",attrs:{span:13}},[n("div",{staticClass:"grid-content bg-purple-dark"},[t.treeShow?n("el-tree",{attrs:{data:t.menuList,"node-key":"Id","default-expand-all":t.defaultExpand,"highlight-current":"","expand-on-click-node":!1,"default-expanded-keys":t.allId},on:{"node-expand":t.nodeExpand,"node-collapse":t.nodeCollapse},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node,i=e.data;return n("span",{staticClass:"custom-tree-node tree-width"},[n("span",{staticClass:"dataLabel"},[t._v(t._s(a.label))]),t._v(" "),n("span",{staticClass:"dataPath"},[t._v(t._s(i.path))]),t._v(" "),n("span",{staticClass:"select-methods"},[n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(e){t.append(i)}}}),t._v(" "),n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(e){t.deleteData(a,i)}}})],1)])}}])}):t._e()],1)]),t._v(" "),n("el-col",{staticClass:"menu-right",attrs:{span:10}},[n("div",{staticClass:"grid-content"},[n("div",{staticClass:"menu-right-title"},[n("span",{class:{"no-redirect":"Update"===t.dialogStatus},on:{click:function(e){t.cutover("add")}}},[t._v(t._s(t.$t("table.add")))]),t._v(" "),"Update"===t.dialogStatus?n("b",[t._v(" / ")]):t._e(),t._v(" "),"Update"===t.dialogStatus?n("span",{staticClass:"Update",class:{"no-redirect":"add"===t.dialogStatus}},[t._v(t._s(t.$t("table.Update")))]):t._e()]),t._v(" "),n("el-form",{ref:"formData",attrs:{model:t.temp,rules:t.demoRules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:t.$t("menu.root")}},[[n("el-select",{attrs:{clearable:"",placeholder:t.$t("menu.root")},model:{value:t.temp.parentId,callback:function(e){t.$set(t.temp,"parentId",e)},expression:"temp.parentId"}},t._l(t.setMenuList,function(t){return n("el-option",{key:t.Id,attrs:{label:t.label,value:t.Id}})}))]],2),t._v(" "),n("el-form-item",{attrs:{label:t.$t("menu.menuTitle"),prop:"label"}},[[n("el-input",{attrs:{placeholder:t.$t("table.input")+t.$t("menu.menuTitle"),maxlength:"12"},model:{value:t.temp.label,callback:function(e){t.$set(t.temp,"label",e)},expression:"temp.label"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"el-icon-edit"})])],2)]],2),t._v(" "),n("el-form-item",{attrs:{label:t.$t("menu.icon"),prop:"icon"}},[[n("el-input",{attrs:{maxlength:"12"},on:{focus:function(e){t.dialogFormVisible=!0}},model:{value:t.temp.icon,callback:function(e){t.$set(t.temp,"icon",e)},expression:"temp.icon"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"el-icon-edit"})])],2)]],2),t._v(" "),n("el-form-item",{attrs:{label:t.$t("menu.path"),prop:"path"}},[[n("el-input",{attrs:{placeholder:t.$t("table.input")+t.$t("menu.path")},model:{value:t.temp.path,callback:function(e){t.$set(t.temp,"path",e)},expression:"temp.path"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"el-icon-edit"})])],2)]],2),t._v(" "),n("el-form-item",["add"===t.dialogStatus?n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.createData}},[t._v(t._s(t.$t("table.submit")))]):t._e(),t._v(" "),"Update"===t.dialogStatus?n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.updateData}},[t._v(t._s(t.$t("table.submit")))]):t._e(),t._v(" "),n("el-button",{attrs:{type:"warning",size:"medium"},on:{click:t.onReset}},[t._v(t._s(t.$t("table.reset")))])],1)],1)],1)])],1)],1)]),t._v(" "),n("el-dialog",{attrs:{id:"dialog-form-header",title:t.$t("table.icons"),visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("div",{staticClass:"clear"},t._l(t.iconsMap,function(e){return n("div",{key:e,staticClass:"icon-item",class:{"is-selected":e===t.temp.icon},on:{click:function(n){t.handleClipboard(e)}}},[n("svg-icon",{attrs:{"class-name":"disabled","icon-class":e}})],1)})),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("table.cancel")))])],1)])],1)},staticRenderFns:[]};var x=n("VU/8")(v,g,!1,function(t){n("TN5G")},"data-v-3ef6b984",null);e.default=x.exports},TN5G:function(t,e,n){var a=n("oAsZ");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("e1f87292",a,!0)},oAsZ:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.filter-container[data-v-3ef6b984] {\n  margin: 15px 30px 0;\n}\n#g-account[data-v-3ef6b984] {\n  min-width: 500px;\n  min-height: 400px;\n  width: 80%;\n  height: calc(100vh - 250px);\n  overflow: auto;\n  border-radius: 5px;\n  -webkit-box-shadow: #ccc 0px 0px 1px;\n          box-shadow: #ccc 0px 0px 1px;\n  margin: 15px auto;\n}\n#g-account .header[data-v-3ef6b984] {\n  font-size: 24px;\n  text-align: center;\n  line-height: 50px;\n  border-bottom: 1px solid #ccc;\n}\n#g-account .content[data-v-3ef6b984] {\n  padding: 20px;\n}\n#g-account .content .item[data-v-3ef6b984] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  height: 50px;\n  line-height: 50px;\n  border-bottom: 1px solid #eee;\n}\n#g-account .content .item-key[data-v-3ef6b984] {\n  width: 150px;\n  text-align: right;\n}\n#g-account .content .item-value[data-v-3ef6b984] {\n  padding-left: 10px;\n}\n.grid-content[data-v-3ef6b984] {\n  border-radius: 4px;\n  min-height: 36px;\n  padding-top: 10px;\n}\n.select-methods[data-v-3ef6b984] {\n  float: right;\n  margin-right: 10px;\n}\n.dataLabel[data-v-3ef6b984],\n.dataPath[data-v-3ef6b984] {\n  line-height: 28px;\n}\n.tree-width[data-v-3ef6b984] {\n  width: 100%;\n}\n.menu-right[data-v-3ef6b984] {\n  background: #e8e8e8;\n}\n.menu-left[data-v-3ef6b984] {\n  height: 450px;\n  overflow: auto;\n  border: 1px solid #dcdfe6;\n  border-radius: 5px;\n}\n.menu-right-title[data-v-3ef6b984] {\n  border-bottom: 1px solid #bdb5b5;\n  padding-bottom: 5px;\n  margin-bottom: 10px;\n}\n.menu-right-title span[data-v-3ef6b984] {\n    font-weight: 700;\n    cursor: text;\n}\n.menu-right-title span.no-redirect[data-v-3ef6b984] {\n    font-weight: 400;\n    color: #97a8be;\n    cursor: default;\n}\n.menu-right-title .span.Update[data-v-3ef6b984] {\n    cursor: text;\n}\n.dataPath[data-v-3ef6b984] {\n  padding-left: 40px;\n  color: #409eff;\n}\n.icons-wrapper[data-v-3ef6b984] {\n  margin: 0 auto;\n}\n.clear[data-v-3ef6b984] {\n  max-height: 400px;\n  overflow-y: auto;\n}\n.icon-item[data-v-3ef6b984] {\n  margin: 10px;\n  height: 50px;\n  line-height: 50px;\n  text-align: center;\n  width: 50px;\n  float: left;\n  font-size: 30px;\n  color: #24292e;\n  border: 1px solid transparent;\n  cursor: pointer;\n}\n.icon-item span[data-v-3ef6b984] {\n    display: block;\n    font-size: 16px;\n    margin-top: 10px;\n}\n.icon-item.is-selected[data-v-3ef6b984] {\n  border-color: #666;\n}\n.disabled[data-v-3ef6b984] {\n  pointer-events: none;\n}\n",""])}});